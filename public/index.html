<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>To-Do</title>
</head>

<body>
  <h1>TASKS</h1>
  <form action="/api" method="post">
    <label for="task">Enter Task: </label>
    <input type="text" id="task" name="task" required />
    <input type="submit" value="->" />
  </form>
  <div class="listOfTasks"></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
    integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
    crossorigin="anonymous"></script>
  <script>
    const listOfTasks = document.querySelector(".listOfTasks");

    const fetchTasks = async () => {
      try {
        const tasks = await axios.get("/api");
        //   console.log(tasks);
        const taskList = tasks.data.tasks.map((t) => {
          return `${t.task}<br>`;
        });
        listOfTasks.innerHTML = taskList.join("");
      } catch (error) {
        listOfTasks.innerHTML = `<h3>Can't Fetch Data</h3>`;
      }
    };
    fetchTasks();
  </script>
</body>

</html>